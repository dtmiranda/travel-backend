// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

//Create models

model Island{
  id String @default(uuid()) @id
  name String @unique
  cities City[]  

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("islands")
}


model City{
  id String @default(uuid()) @id
  name String @unique

  islandId String
  island Island @relation(fields: [islandId], references: [id])
  
  trails Trail[]
  events Event[]
  restaurants Restaurant[]
  hotels Hotel[]

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("cities")
}


model Trail{
  id String @default(uuid()) @id
  name String @unique
  description String
  start_coordinate String
  end_coordinate String
  price Decimal
  duration DateTime 

  cityId String
  city City @relation(fields: [cityId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt
  
  @@map("trails")
}



model Event{
  id String @default(uuid()) @id
  name String @unique
  description String
  price Decimal
  start_date DateTime
  end_date DateTime
  event_hour DateTime
  event_coordenate String

  tickets Ticket[]

  cityId String
  city City @relation(fields: [cityId], references: [id])

  
  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("events")
}


model Profile{
  id String @id @default(uuid())
  bio String?
  name String
  surname String

  tickets Ticket[]
  reservations Reservation[]

  //relation field
  countryId String @unique
  country Country @relation(fields: [countryId], references: [id])
  
  userId String @unique
  user User @relation(fields: [userId], references: [id])
  
  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("profiles")
}


model Ticket{
  id String @default(uuid()) @id

  profileId String
  profile Profile @relation(fields: [profileId], references: [id])
  
  eventId String
  event Event @relation(fields: [eventId], references: [id])
  
  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("tickets")

}



model Restaurant{
  id String @id @default(uuid())
  name String @unique
  coordinate String

  thumbnails Thumbnail[]
  plates Plate[]

  cityId String
  city City @relation(fields: [cityId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("restaurants")

}

model Plate{
  id String @id @default(uuid())
  name String @unique
  decription String
  price Decimal

  photos_plates PhotoPlate[]
  restaurantId String
  restaurant Restaurant @relation(fields: [restaurantId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("plates")

}

model Photo{
  id String @id @default(uuid())
  link String
  photos_plates PhotoPlate[]
  photos_rooms PhotoRoom[]

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("photos")
}



model PhotoPlate{
  id String @id @default(uuid())

  plateId String
  plate Plate @relation(fields: [plateId], references: [id])

  photoId String
  photo Photo @relation(fields: [photoId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("photos_plates")
}

model PhotoRoom{
  id String @id @default(uuid())

  roomId String
  room Room @relation(fields: [roomId], references: [id])

  photoId String
  photo Photo @relation(fields: [photoId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("photos_rooms")

}


model Hotel{
  id String @id @default(uuid())
  name String @unique
  coordinate String

  thumbnails Thumbnail[]
  rooms Room[]

  cityId String
  city City @relation(fields: [cityId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("hotels")
}


model Thumbnail{
  id String @id @default(uuid())
  name String 

  restaurantId String
  restaurant Restaurant @relation(fields: [restaurantId], references: [id])
  
  hotelId String
  hotel Hotel @relation(fields: [hotelId], references: [id])
  
  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("thumbnails")
}


model Room{
  id String @id @default(uuid())
  daily Decimal
  occupied Boolean
  description String
  reservations Reservation[]

  photos_rooms PhotoRoom[]

  hotelId String
  hotel Hotel @relation(fields: [hotelId], references: [id])
  
  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("rooms")

}


model Reservation{
  id String @id @default(uuid())

  profileId String
  profile Profile @relation(fields: [profileId], references: [id])

  roomId String
  room Room @relation(fields: [roomId], references: [id])

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("reservations")
}





model User {
  id        String   @default(uuid()) @id
  email     String  @unique 
  password  String
  profile Profile?

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("users")
}


model Country{
  id String @id @default(uuid())
  name String @unique
  profile Profile?

  create_at DateTime @default(now())
  update_at DateTime @updatedAt

  @@map("countries")
  
}











 
